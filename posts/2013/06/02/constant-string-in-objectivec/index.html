<!doctype html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Objective-Cで文字列定数だからといって、このままでいいはずがない。</title>

    <link rel="stylesheet" href="http://yuseinishiyama.com/theme/css/main.css">
    <link rel="stylesheet" href="http://yuseinishiyama.com/theme/css/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <div><img src="" class="grv-img"/></div>
        <div class="title"><a href="http://yuseinishiyama.com/">だからといって、このままでいいはずがない。 </a></div>
        <div class="sub-title"></div>

<p>
    <div class="view"><a href="http://yuseinishiyama.com/pages/about-me.html">About Me</a></div>
  <div class="view"><a href="http://yuseinishiyama.com/archives.html">Archives</a></div>
  <div class="view"><a href="http://yuseinishiyama.com/categories">Categories</a></div>
</p>

<!-- Social links -->
<div class="social">
<h4>Follow Me</h4>
<ul>
    <li><a href="https://twitter.com/yuseinishiyama">twitter</a></li>
    <li><a href="https://github.com/yuseinishiyama">github</a></li>
</ul>
</div>

      </header>
      <section>
<section id="content" class="body">
  <article>
      <div class="article-title">
        Objective-Cで文字列定数
      </div>

    <div class="entry-content">
<p>
<small>
<abbr class="published" title="2013-06-02T21:54:00">
  2013-06-02(日)
</abbr> | 
 -- (<a href="http://yuseinishiyama.com/posts/2013/06/02/constant-string-in-objectivec/" rel="bookmark">permalink</a>)
</small>
</p>      <p>Objective-Cで文字列定数の宣言をする方法について考えてみた。<br />
最も手っ取り早いのは当然マクロだろう。</p>
<div class="highlight"><pre><span class="cp">#define CONST_STR @&quot;Const Str&quot;</span>
</pre></div>


<p>だが、当然二重定義の問題があるので好ましいとは言えない。<br />
より好ましいのは以下の方法だろう。</p>
<div class="highlight"><pre><span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">kConstStr</span> <span class="o">=</span> <span class="s">@&quot;Const Str&quot;</span><span class="p">;</span>
</pre></div>


<p>constの位置に注意。<br />
文字列に対するポインタにconstを指定している。  </p>
<p>（ちなみにObective-Cではメンバ変数のプレフィックは「_」が完全に推奨されている一方で、定数にこうしたハンガリアン記法を使うかどうか迷いどころだが、たいがいのフレームワークでは定数はこの形で書かれているし、実際しっくりくる。）</p>
<p>さてこの定数を外部に公開したいとする。<br />
ここでこんな風にやってしまうと間違いだ。</p>
<div class="highlight"><pre><span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">kConstStr</span> <span class="o">=</span> <span class="s">@&quot;Const Str&quot;</span><span class="p">;</span>
</pre></div>


<p><a href="http://stackoverflow.com/a/7642561">http://stackoverflow.com/a/7642561</a><br />
ここにstaticに関する分かりやすい説明がある。</p>
<blockquote>
<p>static in Objective-C means a different thing than static in a C++
class, in the context of static class data members and static class
methods. In C and Objective-C, a static variable or function at global
scope means that that symbol has internal linkage.</p>
<p>Internal linkage means that that symbol is local to the current
translation unit, which is the current source file (.c or .m) being
compiled and all of the header files that it recursively includes.
That symbol cannot be referenced from a different translation unit,
and you can have other symbols with internal linkage in other
translation units with the same name.</p>
<p>So, if you have a header file declaring a variable as static, each
source file that includes that header gets a separate global
variable—all references to that variable within one source file will
refer to the same variable, but references in different source files
will refer to different variables.</p>
<p>If you want to have a single global variable, you can't have it in
class scope like in C++. One option is to create a global variable
with external linkage: declare the variable with the extern keyword in
a header file, and then in one source file, define it at global scope
without the extern keyword. Internal linkage and external linkage are
mutually exclusive—you cannot have a variable declared as both extern
and static.</p>
<p>An alternative, as Panos suggested, would be to use a class method
instead of a variable. This keeps the functionality within the scope
of the class, which makes more sense semantically, and you can also
make it @private if you so desire. It does add a marginal performance
penalty, but that's highly unlikely to be the bottleneck in your
application (if you suspect it is, always profile first)</p>
</blockquote>
<p>つまりCやObjective-Cのstaticは内部結合であり、ヘッダ上のstatic変数を異なるソースファイルから読み取ると、それぞれのファイル内で独立した変数として認識されてしまうというわけだ。<br />
試しに以下のような実験をしてみた。</p>
<div class="highlight"><pre><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="k">@interface</span> <span class="nc">ClassA</span> : <span class="nc">NSObject</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVarOfClassD</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVarOfClassD:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVar</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVarOfClassD</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVarOfClassD:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">static</span> <span class="n">NSInteger</span> <span class="n">staticVar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">extern</span> <span class="n">NSInteger</span> <span class="n">externVar</span><span class="p">;</span>
</pre></div>


<div class="highlight"><pre><span class="cp">#import &quot;ClassA.h&quot;</span>

<span class="k">@interface</span> <span class="nc">ClassD</span> : <span class="nc">NSObject</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">ClassD</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">staticVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">staticVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">externVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">externVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>

<span class="n">NSInteger</span> <span class="n">externVar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">@implementation</span> <span class="nc">ClassA</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVarOfClassD</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">ClassD</span> <span class="n">staticVar</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVarOfClassD:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">ClassD</span> <span class="n">setStaticVar</span><span class="o">:</span><span class="n">value</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVarOfClassD</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">ClassD</span> <span class="n">externVar</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVarOfClassD:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">ClassD</span> <span class="n">setExternVar</span><span class="o">:</span><span class="n">value</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">staticVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">staticVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">externVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">externVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>


<div class="highlight"><pre><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="k">@interface</span> <span class="nc">ClassB</span> : <span class="nc">NSObject</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVar</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">@end</span>
</pre></div>


<div class="highlight"><pre><span class="cp">#import &quot;ClassB.h&quot;</span>

<span class="cp">#import &quot;ClassA.h&quot;</span>

<span class="k">@interface</span> <span class="nc">ClassB</span> <span class="p">()</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">ClassB</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">staticVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">staticVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">externVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">externVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>


<div class="highlight"><pre><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="k">@interface</span> <span class="nc">ClassC</span> : <span class="nc">NSObject</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVar</span><span class="p">;</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span><span class="p">;</span>

<span class="k">@end</span>
</pre></div>


<div class="highlight"><pre><span class="cp">#import &quot;ClassC.h&quot;</span>

<span class="cp">#import &quot;ClassA.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">ClassC</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">staticVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">staticVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setStaticVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">staticVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">externVar</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">externVar</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setExternVar:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">value</span>
<span class="p">{</span>
    <span class="n">externVar</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>


<div class="highlight"><pre><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="cp">#import &quot;ClassA.h&quot;</span>
<span class="cp">#import &quot;ClassB.h&quot;</span>
<span class="cp">#import &quot;ClassC.h&quot;</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">kConst</span> <span class="o">=</span> <span class="s">@&quot;const&quot;</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="err">@</span><span class="n">autoreleasepool</span> <span class="p">{</span>
        <span class="p">[</span><span class="n">ClassA</span> <span class="n">setStaticVar</span><span class="o">:</span><span class="mi">0</span><span class="p">];</span>
        <span class="p">[</span><span class="n">ClassA</span> <span class="n">setExternVar</span><span class="o">:</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVarOfClassD</span><span class="p">]);</span>

        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVarOfClassD</span><span class="p">]);</span>

        <span class="p">[</span><span class="n">ClassB</span> <span class="n">setStaticVar</span><span class="o">:</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">[</span><span class="n">ClassB</span> <span class="n">setExternVar</span><span class="o">:</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVarOfClassD</span><span class="p">]);</span>

        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVarOfClassD</span><span class="p">]);</span>

        <span class="p">[</span><span class="n">ClassC</span> <span class="n">setStaticVar</span><span class="o">:</span><span class="mi">2</span><span class="p">];</span>
        <span class="p">[</span><span class="n">ClassC</span> <span class="n">setExternVar</span><span class="o">:</span><span class="mi">2</span><span class="p">];</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVarOfClassD</span><span class="p">]);</span>

        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVarOfClassD</span><span class="p">]);</span>

        <span class="p">[</span><span class="n">ClassA</span> <span class="n">setStaticVarOfClassD</span><span class="o">:</span><span class="mi">3</span><span class="p">];</span>
        <span class="p">[</span><span class="n">ClassA</span> <span class="n">setExternVarOfClassD</span><span class="o">:</span><span class="mi">3</span><span class="p">];</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">staticVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;staticVar of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">staticVarOfClassD</span><span class="p">]);</span>

        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classA is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classB is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassB</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classC is %ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassC</span> <span class="n">externVar</span><span class="p">]);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;extern of classD is %ld </span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">long</span><span class="p">)[</span><span class="n">ClassA</span> <span class="n">externVarOfClassD</span><span class="p">]);</span>
     <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>出力結果がこれ。</p>
<div class="highlight"><pre><span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.953</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.955</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.955</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.956</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">0</span> 

<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.956</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.957</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.957</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.957</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">0</span> 

<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.958</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.958</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.959</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.959</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">0</span> 

<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.959</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.960</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.960</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.960</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">1</span> 

<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.961</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">0</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.961</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.961</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">2</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.962</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">0</span> 

<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.962</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">2</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.962</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">2</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.963</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">2</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.963</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">2</span> 

<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.963</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.964</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">1</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.964</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">2</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.964</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="n">staticVar</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">3</span> 

<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.965</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classA</span> <span class="n">is</span> <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.965</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classB</span> <span class="n">is</span> <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.966</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classC</span> <span class="n">is</span> <span class="mi">3</span>
<span class="mi">2013</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mo">02</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mf">04.966</span> <span class="n">StaticExternTest</span><span class="p">[</span><span class="mi">1020</span><span class="o">:</span><span class="mi">303</span><span class="p">]</span> <span class="k">extern</span> <span class="n">of</span> <span class="n">classD</span> <span class="n">is</span> <span class="mi">3</span>
</pre></div>


<p>実際にヘッダファイルから読み込まれたstatic変数は、それぞれ独立して変更されてしまっている。  </p>
<p>一方で、externは外部結合であり、期待通りの動作をする。externだと二重定義も防げる</p>
<p>外部のファイルからも参照したい定数を宣言する場合は、</p>
<div class="highlight"><pre><span class="k">extern</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">kConstStr</span><span class="p">;</span>
</pre></div>


<div class="highlight"><pre><span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">kConstStr</span> <span class="o">=</span> <span class="s">@&quot;Const Str&quot;</span><span class="p">;</span>
</pre></div>


<p>このようにするのが確実だろう。</p>
<p>このあたりの細かい挙動は忘れやすい上に、適当にやっても問題が顕在化しないことのほうが多いからこそ、ベストプラクティスを知っておきたいところだ。</p>
    </div><!-- /.entry-content -->
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'yuseinishiyama'; // required: replace example with your forum shortname
        var disqus_identifier = "posts/2013/06/02/constant-string-in-objectivec/";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>
</section>
      </section>
      <footer>
        <p><small>&copy; だからといって、このままでいいはずがない。 &mdash; Theme based on Sundown by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <!-- Scale fix -->
    <script>
      var metas = document.getElementsByTagName('meta');
      var i;
      
      if (navigator.userAgent.match(/iPhone/i)) {
        for (i=0; i<metas.length; i++) {
          if (metas[i].name == "viewport") {
            metas[i].content = "width=device-width, minimum-scale=1.0, maximum-scale=1.0";
          }
        }
      
        document.addEventListener("gesturestart", gestureStart, false);
      }

      function gestureStart() {
        for (i=0; i<metas.length; i++) {
          if (metas[i].name == "viewport") {
            metas[i].content = "width=device-width, minimum-scale=0.25, maximum-scale=1.6";
          }
        }
      }
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48020408-1', 'yuseinishiyama.com');
  ga('send', 'pageview');
</script>
  </body>
</html>